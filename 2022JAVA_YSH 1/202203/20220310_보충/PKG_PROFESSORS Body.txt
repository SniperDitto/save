CREATE OR REPLACE
PACKAGE BODY PKG_PROFESSORS AS

    --INSERT
  PROCEDURE PROC_INS_PROFESSOR
    (
        IN_PRO_NAME         IN  VARCHAR2
        ,IN_PRO_ADDR_GRP    IN  VARCHAR2
        ,IN_PRO_ADDR        IN  VARCHAR2
        ,IN_PRO_ADDR2       IN  VARCHAR2
        ,IN_PRO_DEPT_GRP    IN  VARCHAR2
        ,IN_PRO_DEPT        IN  VARCHAR2
    ) AS
        V_NEW_PRO_ID    CHAR(7);
  BEGIN
    --아이디생성
    SELECT 'PRO'||TO_CHAR(TO_NUMBER(SUBSTR(NVL(MAX(PRO_ID),'PRO000'),4,3))+1,'FM000')
    INTO V_NEW_PRO_ID
    FROM PROFESSORS_TBL
    ;
  
    INSERT INTO PROFESSORS_TBL(PRO_ID, PRO_NAME, PRO_ADDR_GRP, PRO_ADDR, PRO_ADDR2, PRO_DEPT_GRP, PRO_DEPT)
    VALUES(V_NEW_PRO_ID, IN_PRO_NAME, IN_PRO_ADDR_GRP, IN_PRO_ADDR, IN_PRO_ADDR2, IN_PRO_DEPT_GRP, IN_PRO_DEPT);
  
  END PROC_INS_PROFESSOR;
  
  
    --SELECT
  PROCEDURE PROC_SEL_PROFESSORS
    (
        IN_PRO_ID       IN  VARCHAR2
        ,IN_PRO_NAME    IN  VARCHAR2
        ,O_CUR          OUT SYS_REFCURSOR
    ) AS
  BEGIN
    OPEN O_CUR FOR
    SELECT * FROM PROFESSORS_TBL
    WHERE PRO_ID LIKE '%'||IN_PRO_ID||'%'
        AND PRO_NAME LIKE '%'||IN_PRO_NAME||'%'
    ;
    
  END PROC_SEL_PROFESSORS;


    --UPDATE
  PROCEDURE PROC_UP_PROFESSORS
    (   
        IN_PRO_ID           IN  VARCHAR2
        ,IN_PRO_NAME        IN  VARCHAR2
        ,IN_PRO_ADDR_GRP    IN  VARCHAR2
        ,IN_PRO_ADDR        IN  VARCHAR2
        ,IN_PRO_ADDR2       IN  VARCHAR2
        ,IN_PRO_DEPT_GRP    IN  VARCHAR2
        ,IN_PRO_DEPT        IN  VARCHAR2
    ) AS
  BEGIN
    
    UPDATE PROFESSORS_TBL
    SET PRO_NAME=IN_PRO_NAME,
        PRO_ADDR_GRP=IN_PRO_ADDR_GRP,
        PRO_ADDR=IN_PRO_ADDR,
        PRO_ADDR2=IN_PRO_ADDR2,
        PRO_DEPT_GRP=IN_PRO_DEPT_GRP,
        PRO_DEPT=IN_PRO_DEPT
    WHERE PRO_ID=IN_PRO_ID
    ;

  END PROC_UP_PROFESSORS;


    --DELETE
  PROCEDURE PROC_DEL_PROFESSORS
    (
        IN_PRO_ID   IN  VARCHAR2
    ) AS
  BEGIN
    DELETE FROM PROFESSORS_TBL
    WHERE PRO_ID=IN_PRO_ID
    ;
  END PROC_DEL_PROFESSORS;

END PKG_PROFESSORS;